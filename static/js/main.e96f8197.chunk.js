(this["webpackJsonpcurso-react-router-proyecto2"]=this["webpackJsonpcurso-react-router-proyecto2"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){"use strict";o.r(t);var n=o(0),r=o.n(n),c=o(5),a=o.n(c),s=o(4),l=o(3);function i(e,t){const[o,n]=r.a.useReducer(j,d({initialValue:t})),{sincronizedItem:c,error:a,loading:s,item:l}=o,i=e=>n({type:u.error,payload:e});r.a.useEffect((()=>{setTimeout((()=>{try{const o=localStorage.getItem(e);let r;o?r=JSON.parse(o):(localStorage.setItem(e,JSON.stringify(t)),r=t),(e=>{n({type:u.success,payload:e})})(r)}catch(a){i(a)}}),3e3)}),[c]);return{item:l,saveItem:t=>{try{const o=JSON.stringify(t);localStorage.setItem(e,o),(e=>{n({type:u.save,payload:e})})(t)}catch(a){i(a)}},loading:s,error:a,sincronizeItem:()=>{n({type:u.sincronize})}}}const d=e=>{let{initialValue:t}=e;return{sincronizedItem:!0,error:!1,loading:!0,item:t}},u={error:"ERROR",success:"SUCCESS",save:"SAVE",sincronize:"SINCRONIZE"},j=(e,t)=>((e,t)=>({[u.error]:{...e,error:!0},[u.success]:{...e,error:!1,loading:!1,sincronizedItem:!0,item:t},[u.save]:{...e,item:t},[u.sincronize]:{...e,sincronizedItem:!1,loading:!0}}))(e,t.payload)[t.type]||e;function b(){const{item:e,saveItem:t,sincronizeItem:o,loading:n,error:c}=i("TODOS_V2",[]),[a,s]=r.a.useState(""),[l,d]=r.a.useState(!1),u=e.filter((e=>!!e.completed)).length,j=e.length;let b=[];b=!a.length>=1?e:e.filter((e=>{const t=e.text.toLowerCase(),o=a.toLowerCase();return t.includes(o)}));return{state:{loading:n,error:c,totalTodos:j,completedTodos:u,searchValue:a,searchedTodos:b,getTodo:t=>{const o=e.findIndex((e=>e.id===t));return e[o]}},stateUpdaters:{setSearchValue:s,addTodo:o=>{const n=function(e){if(!e.length)return 1;const t=e.map((e=>e.id));return Math.max(...t)+1}(e),r=[...e];r.push({completed:!1,text:o,id:n}),t(r)},completeTodo:o=>{const n=e.findIndex((e=>e.id===o)),r=[...e];r[n].completed=!0,t(r)},deleteTodo:o=>{const n=e.findIndex((e=>e.id===o)),r=[...e];r.splice(n,1),t(r)},sincronizeTodos:o,editTodo:(o,n)=>{const r=e.findIndex((e=>e.id===o)),c=[...e];c[r].text=n,t(c)}}}}var m=o(2);function p(e){let{children:t,loading:o}=e;return Object(m.jsx)("header",{children:r.a.Children.toArray(t).map((e=>r.a.cloneElement(e,{loading:o})))})}o(12);function O(e){let{totalTodos:t,completedTodos:o,loading:n}=e;return Object(m.jsxs)("h2",{className:`TodoCounter ${!!n&&"TodoCounter--loading"}`,children:["Has completado ",o," de ",t," TODOs"]})}o(13);function h(e){let{searchValue:t,setSearchValue:o,loading:n}=e;return Object(m.jsx)("input",{className:"TodoSearch",placeholder:"Cebolla",value:t,onChange:e=>{console.log(e.target.value),o(e.target.value)},disabled:n})}var x;o(14);function f(e){const t=e.children||e.render;return Object(m.jsxs)("section",{className:"TodoList-container",children:[e.error&&e.onError(),e.loading&&e.onLoading(),!e.loading&&!e.totalTodos&&e.onEmptyTodos(),!!e.totalTodos&&!e.searchedTodos.length&&e.onEmptySearchResults(e.searchText),!e.loading&&!e.error&&e.searchedTodos.map(t)]})}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},g.apply(null,arguments)}function T(e,t){let{title:o,titleId:r,...c}=e;return n.createElement("svg",g({viewBox:"0 0 405.272 405.272",xmlSpace:"preserve",ref:t,"aria-labelledby":r},c),o?n.createElement("title",{id:r},o):null,x||(x=n.createElement("path",{d:"M393.401,124.425L179.603,338.208c-15.832,15.835-41.514,15.835-57.361,0L11.878,227.836 c-15.838-15.835-15.838-41.52,0-57.358c15.841-15.841,41.521-15.841,57.355-0.006l81.698,81.699L336.037,67.064 c15.841-15.841,41.523-15.829,57.358,0C409.23,82.902,409.23,108.578,393.401,124.425z"})))}const v=n.forwardRef(T);var C;o.p;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},y.apply(null,arguments)}function E(e,t){let{title:o,titleId:r,...c}=e;return n.createElement("svg",y({viewBox:"0 0 348.333 348.334",xmlSpace:"preserve",ref:t,"aria-labelledby":r},c),o?n.createElement("title",{id:r},o):null,C||(C=n.createElement("path",{d:"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85 c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563 c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85 l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554 L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z"})))}const I=n.forwardRef(E);var S,N;o.p;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},w.apply(null,arguments)}function k(e,t){let{title:o,titleId:r,...c}=e;return n.createElement("svg",w({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},c),o?n.createElement("title",{id:r},o):null,S||(S=n.createElement("path",{d:"M21.2799 6.40005L11.7399 15.94C10.7899 16.89 7.96987 17.33 7.33987 16.7C6.70987 16.07 7.13987 13.25 8.08987 12.3L17.6399 2.75002C17.8754 2.49308 18.1605 2.28654 18.4781 2.14284C18.7956 1.99914 19.139 1.92124 19.4875 1.9139C19.8359 1.90657 20.1823 1.96991 20.5056 2.10012C20.8289 2.23033 21.1225 2.42473 21.3686 2.67153C21.6147 2.91833 21.8083 3.21243 21.9376 3.53609C22.0669 3.85976 22.1294 4.20626 22.1211 4.55471C22.1128 4.90316 22.0339 5.24635 21.8894 5.5635C21.7448 5.88065 21.5375 6.16524 21.2799 6.40005V6.40005Z",stroke:"#000000",strokeWidth:.5,strokeLinecap:"round",strokeLinejoin:"round"})),N||(N=n.createElement("path",{d:"M11 4H6C4.93913 4 3.92178 4.42142 3.17163 5.17157C2.42149 5.92172 2 6.93913 2 8V18C2 19.0609 2.42149 20.0783 3.17163 20.8284C3.92178 21.5786 4.93913 22 6 22H17C19.21 22 20 20.2 20 18V13",stroke:"#000000",strokeWidth:.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const L=n.forwardRef(k);o.p,o(15);const z={check:e=>Object(m.jsx)(v,{className:"Icon-svg Icon-svg--check",fill:e}),edit:e=>Object(m.jsx)(L,{className:"Icon-svg Icon-svg--edit",fill:e}),delete:e=>Object(m.jsx)(I,{className:"Icon-svg Icon-svg--delete",fill:e})};function V(e){let{type:t,color:o="gray",onClick:n}=e;return Object(m.jsx)("span",{className:`Icon-container Icon-container--${t}`,onClick:n,children:z[t](o)})}function D(e){let{completed:t,onComplete:o}=e;return Object(m.jsx)(V,{type:"check",color:t?"#4caf50":"gray",onClick:o})}function R(e){let{onDelete:t}=e;return Object(m.jsx)(V,{type:"delete",onClick:t})}o(16);function F(e){let{onEdit:t}=e;return Object(m.jsx)(V,{type:"edit",onClick:t})}function A(e){return Object(m.jsxs)("li",{className:"TodoItem",children:[Object(m.jsx)(D,{completed:e.completed,onComplete:e.onComplete}),Object(m.jsx)("p",{className:`TodoItem-p ${e.completed&&"TodoItem-p--complete"}`,children:e.text}),Object(m.jsx)(R,{onDelete:e.onDelete}),Object(m.jsx)(F,{onEdit:e.onEdit})]})}function B(){return Object(m.jsx)("p",{children:"Desesp\xe9rate, hubo un error..."})}o(17);function J(){return Object(m.jsxs)("div",{className:"LoadingTodo-container",children:[Object(m.jsx)("span",{className:"LoadingTodo-completeIcon"}),Object(m.jsx)("p",{className:"LoadingTodo-text",children:"Cargando TODOs..."}),Object(m.jsx)("span",{className:"LoadingTodo-deleteIcon"})]})}function M(){return Object(m.jsx)("p",{children:"\xa1Crea tu primer TODO!"})}o(18);function U(e){return Object(m.jsx)("button",{className:"CreateTodoButton",onClick:e.onClick,children:"+"})}o(19);function H(e){let{sincronize:t}=e;const{show:o,toggleShow:n}=function(e){const[t,o]=r.a.useState(!1);return window.addEventListener("storage",(e=>{"TODOS_V1"===e.key&&(console.log("Hubo cambios en TODOS_V1"),o(!0))})),{show:t,toggleShow:()=>{e(),o(!1)}}}(t);return o?Object(m.jsx)("div",{className:"ChangeAlert-bg",children:Object(m.jsxs)("div",{className:"ChangeAlert-container",children:[Object(m.jsx)("p",{children:"Parece que cambiaste tus TODOs en otra pesta\xf1a o ventana del navegador."}),Object(m.jsx)("p",{children:"\xbfQuieres sincronizar tus TODOs?"}),Object(m.jsx)("button",{className:"TodoForm-button TodoForm-button--add",onClick:n,children:"Yes!"})]})}):null}function P(){const e=Object(l.o)(),{state:t,stateUpdaters:o}=b(),{error:n,loading:c,searchedTodos:a,totalTodos:s,completedTodos:i,searchValue:d}=t,{completeTodo:u,deleteTodo:j,setSearchValue:x,sincronizeTodos:g}=o;return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsxs)(p,{loading:c,children:[Object(m.jsx)(O,{totalTodos:s,completedTodos:i}),Object(m.jsx)(h,{searchValue:d,setSearchValue:x})]}),Object(m.jsx)(f,{error:n,loading:c,totalTodos:s,searchedTodos:a,searchText:d,onError:()=>Object(m.jsx)(B,{}),onLoading:()=>Object(m.jsx)(J,{}),onEmptyTodos:()=>Object(m.jsx)(M,{}),onEmptySearchResults:e=>Object(m.jsxs)("p",{children:["No hay resultados para ",e]}),children:t=>Object(m.jsx)(A,{text:t.text,completed:t.completed,onEdit:()=>{e("/edit/"+t.id,{state:{todo:t}})},onComplete:()=>u(t.id),onDelete:()=>j(t.id)},t.id)}),Object(m.jsx)(U,{onClick:()=>e("/new")}),Object(m.jsx)(H,{sincronize:g})]})}o(20);function $(e){const t=Object(l.o)(),[o,n]=r.a.useState(e.defaultTodoText||"");return Object(m.jsxs)("form",{onSubmit:n=>{n.preventDefault(),t("/"),e.submitEvent(o)},children:[Object(m.jsx)("label",{children:e.label}),Object(m.jsx)("textarea",{value:o,onChange:e=>{n(e.target.value)},placeholder:"Cortar la cebolla oara el almuerzo"}),Object(m.jsxs)("div",{className:"TodoForm-buttonContainer",children:[Object(m.jsx)("button",{type:"button",className:"TodoForm-button TodoForm-button--cancel",onClick:()=>{t("/")},children:"Cancelar"}),Object(m.jsx)("button",{type:"submit",className:"TodoForm-button TodoForm-button--add",children:e.submitText})]})]})}function _(){const{stateUpdaters:e}=b(),{addTodo:t}=e;return Object(m.jsx)($,{label:"Escribe tu nuevo TODO",submitText:"A\xf1adir",submitEvent:e=>t(e)})}function q(){var e;const t=Object(l.m)(),o=Object(l.q)(),n=Number(o.id),{state:r,stateUpdaters:c}=b(),{loading:a,getTodo:s}=r,{editTodo:i}=c;let d;if(null!==(e=t.state)&&void 0!==e&&e.todo)d=t.state.todo.text;else{if(a)return Object(m.jsx)("p",{children:"Cargando..."});d=s(n).text}return Object(m.jsx)($,{label:"Edita tu TODO",defaultTodoText:d,submitText:"Editar",submitEvent:e=>i(n,e)})}function W(){return Object(m.jsx)(s.a,{children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/",element:Object(m.jsx)(P,{})}),Object(m.jsx)(l.a,{path:"/new",element:Object(m.jsx)(_,{})}),Object(m.jsx)(l.a,{path:"/edit/:id",element:Object(m.jsx)(q,{})}),Object(m.jsx)(l.a,{path:"*",element:Object(m.jsx)("p",{children:"Not FOund"})})]})})}o(21);a.a.render(Object(m.jsx)(W,{}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.e96f8197.chunk.js.map